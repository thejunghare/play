<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Firebase Realtime CRUD</title>

    <!-- firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
    <!-- firestore -->
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore-compat.js"></script>
    <!-- Realtime database -->
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-database-compat.js"></script>
  </head>

  <body>
    <script type="module">
      const firebaseConfig = {
        apiKey: "AIzaSyD57N2Ewp8UVtcXKmVMFyP1HeTBksh4iww",
        authDomain: "my-project-9714d.firebaseapp.com",
        projectId: "my-project-9714d",
        storageBucket: "my-project-9714d.firebasestorage.app",
        messagingSenderId: "84976519917",
        appId: "1:84976519917:web:1294f53b957c48e38f5ae4",
      };

      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();

      // firestore -> add, get, update, delete, where
      // mongodb -> db.collection().find($sort{name:1}) -> get documents
      /*{
            name: "prasad";
            age: 18;
          }*/
      // firestore -> db.collection().where("age", "=", "18").get()

      /* const q = query(collection(db, "cities"), where("capital", "==", true));

      const querySnapshot = await getDocs(q);
      querySnapshot.forEach((doc) => {
        // doc.data() is never undefined for query doc snapshots
        console.log(doc.id, " => ", doc.data());
      }); */

      /*  const q = db.query(
            db.collection("student").where("name", ">=", "p"),
            where("age", "==", 18)
          ); */

      async function fetchwithfilter() {
        try {
          let snapshot = await db
            .collection("student")
            .where("name", "<=", "p")
            // .where("age", "==", 18) // 19 x , 18
            .get();

          if (snapshot) {
            snapshot.forEach((document) => {
              console.log(
                `fetched docs ${document.data().name}, ${document.data().age}`
              );
            });
          }
        } catch (error) {
          console.error(`something went wrong ${error}`);
        }
      }

      window.api = { fetchwithfilter };
    </script>
  </body>
</html>
